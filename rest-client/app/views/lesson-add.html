<h3>Lesson add form</h3>
<hr>
<div ng-show="error" class="alert alert-danger">
	<p>{{error}}</p>
</div>

<form class="form-horizontal" role="form" ng-submit="addLesson()">

	<div class="form-group">
		<label for="inputLessonDate">Date</label>
		<input type="date" ng-model="picker" id="inputLessonDate" required>
	</div>

	<div class="form-group">
		<label for="inputSubject">Subject</label>
		<select ng-model="lesson.subject_id" id="inputSubject" required>
			<option ng-repeat="option in subjects" value="{{option._id}}">{{option.name}}</option>
		</select>
	</div>

	<div class="form-group">
		<label for="inputClass">Class</label>
		<select ng-change="getStudentsFromClass()" ng-model="lesson.class_id" id="inputClass" required>
			<option ng-repeat="option in classes" value="{{option._id}}">{{option.name}}</option>
		</select>
	</div>


	<table class="table table-striped">
		<thead>
			<tr>
				<td>Name</td>
				<td>Registry No</td>
				<td>Attendance</td>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="person in attendances">
				<td>{{ person.firstname }} {{ person.lastname }}</td>
				<td>{{ person.registrynumber }}</td>
				<td>
					<select ng-model="person.status" id="inputAttendance" required>
						<option ng-repeat="option in allowedAtt" value="{{option}}">{{option}}</option>
					</select>&nbsp<i ng-if="person.status=='absent'" class="glyphicon glyphicon-remove-sign"></i>
				</td>
			</tr>
		</tbody>
	</table>

	<div class="control-group">
		<div class="controls options">
			<button class="btn btn-primary" type="submit">Save</button>
			<a class="btn btn-small btn-link" ng-href="#/lessons" href>Cancel</a>
		</div>
	</div>
</form>